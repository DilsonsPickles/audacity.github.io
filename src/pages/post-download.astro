---
import BaseLayout from "../layouts/BaseLayout.astro";
import "../styles/icons.css";
import ContactForm from "../components/form/ContactForm";
import NEWBlogPostCard from "../components/card/NEWBlogPostCard.astro";

import { getCollection } from "astro:content";
const publishedBlogPosts = await getCollection("blog", ({ data }) => {
  return data.draft !== true;
});

const maxposts = 4;
---

<BaseLayout title="Audacity Â® | post-download">
  <main id="main">
    <section class="max-w-screen-4xl mx-auto bg-gray-900">
      <div class="text-center py-24">
        <h1 class="text-white leading-tight">
          Thank you for downloading Audacity!
        </h1>
      </div>
    </section>

    <section
      class="grid grid-cols-12 max-w-screen-xl mx-auto mt-12 mb-20 gap-16"
    >
      <div class="col-start-2 col-span-6">
        <h3>Read our blog</h3>
        <div
          class="grid grid-cols-8 my-4 gap-y-8 sm:gap-8 md:gap-12"
        >
          {
            publishedBlogPosts
              .sort(
                (a, b) =>
                  b.data.publishDate.getTime() - a.data.publishDate.getTime()
              )
              .slice(0, maxposts)
              .map((post) => {
                return (
                  <NEWBlogPostCard
                    href={post.slug}
                    title={post.data.title}
                    description={post.data.description}
                    author={post.data.author}
                    publishDate={post.data.publishDate}
                    cover={post.data.cover}
                    coverAlt={post.data.coverAlt}
                  />
                );
              })
          }
        </div>
      </div>
      <div class="col-start-8 col-span-4">
        <div>
          <h3>Subscribe to our mailing list</h3>
          <p class="mt-2">
            By joining our community, you'll be the first to know about upcoming
            betas, exciting product launches, and exclusive insider updates.
          </p>
        </div>
        <ContactForm client:load />
      </div>
    </section>
  </main>
</BaseLayout>
